name: pull-request-test
run-name: ${{github.actor}}/${{ github.ref_name }}:pull-request-test
on: [push]
jobs:
  pull-request-test:
    # Enables multiple runs with every possible
    # combination of matrix variables
    strategy:
      matrix:
        os: [ubuntu-22.04, windows-2022, macos-12]
    runs-on: ${{ matrix.os }}
    continue-on-error: false
    steps:
      # Check out the current repository into the VM
      - uses: actions/checkout@v3
      # Set up Java version from project
      - uses: actions/setup-java@v3
        with:
          distribution: 'temurin'
          java-version: '17'
          cache: 'maven'
      # Take permission of all files
      - run: chmod 777 -R *
      # Test the repository
      - run: make test
      # Remove services
      - run: docker compose -v down